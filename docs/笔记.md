<!--
 * @Author: yingjie_wang 2778809626@qq.com
 * @Date: 2024-11-05 11:32:45
 * @LastEditors: yingjie_wang 2778809626@qq.com
 * @LastEditTime: 2024-12-18 16:31:09
 * @FilePath: \undefinedd:\1_wangyingjie\learn\github_project\5_OpenCV\opencv_demo\docs\笔记.md
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->


# 图片知识

## 图片深度

图片深度:8位， 16位， 24位， 32位

- 8位:
  - 2^8 = 2^2^(B) * 2^3^(G) * 2^3^(R) = 256 种颜色
- 16位 
  - 2^16 = 2^5^(B) * 2^6^(G) * 2^5^(R) = 65536 种颜色
- 24位
  - 2^24 = 2^8^(B) * 2^8^(G) * 2^8^(R) = 16777216 种颜色
- 32位
  - 24位+2^8^(A) 

opencv中
1. CV_8U：8位无符号整数（0-255）。这是最常见的图像类型，用于标准的灰度图或彩色图像。
2. CV_8S：8位有符号整数（-128到127）。
3. CV_16U：16位无符号整数（0-65535）。用于更高动态范围的图像。
4. CV_16S：16位有符号整数（-32768到32767）。
5. CV_32S：32位有符号整数。
6. CV_32F：32位浮点数。这种类型常用于更复杂的图像处理，如图像转换时的小数点操作。
7. CV_64F：64位浮点数。提供了更高的精度，用于精确的科学计算。



# 滤波

## 霍夫变换

霍夫变换(Hough Transform)是图像处理中的一种 **特征提取技术** , 主要用于检测图像中的几何形状（如直线、圆、椭圆等），它通过一种投票算法检测具有特定形状的物体。Hough变换是图像处理中从图像中识别几何形状的基本方法之一。Hough变换的基本原理在于利用点与线的对偶性，将原始图像空间的给定的曲线通过曲线表达形式变为参数空间的一个点。这样就把原始图像中给定曲线的检测问题转化为寻找参数空间中的峰值问题。也即把检测整体特性转化为检测局部特性。比如直线、椭圆、圆、弧线等。



# 深度图


深度图（Depth Map）和梯度图（Gradient Map）是图像处理中两种不同类型的图像，它们描述了图像中的不同信息。下面我将详细介绍它们的区别：

### 1. **深度图（Depth Map）**
深度图是一个灰度图像，表示每个像素点到摄像机的距离（或某个参考平面的距离）。在深度图中，像素的灰度值通常用来表示物体的“深度”，即从摄像机或观察者视角出发，物体表面到摄像机的距离。

- **用途**：
  - **3D重建**：深度图可以帮助计算场景的三维结构。
  - **计算机视觉**：用于场景理解、物体检测、立体匹配等任务。
  - **虚拟现实（VR）和增强现实（AR）**：帮助创建真实感的虚拟环境。

- **表现**：
  - 在深度图中，灰度值的高低直接对应物体距离的远近。通常，**较亮的像素**代表物体离摄像机较近，**较暗的像素**代表物体较远。

- **示例**：
  - 假设一个人站在一个房间内，距离摄像机较近的地方显示为亮色（较高的灰度值），而远离摄像机的物体显示为暗色（较低的灰度值）。



| 特性          | 深度图                                |
| ------------- | ------------------------------------- |
| **定义**      | 表示像素与摄像机或参考平面的距离     |
| **灰度值含义**| 灰度值表示距离（离摄像机的距离）     |
| **用途**      | 用于3D重建、物体检测、场景理解       | 
| **表现形式**  | 离摄像机近的区域为亮，远的区域为暗   | 
| **处理方式**  | 基于深度传感器或立体视觉计算         |

### 4. **图像示例对比**
假设有一个简单的灰度图像，其中包含一个物体和背景。我们通过两种方法处理这张图像：

- **深度图**：在深度图中，物体会根据距离摄像机的远近表现为不同的灰度值。物体近的部分为亮色，背景远的部分为暗色。
  
- **梯度图**：在梯度图中，物体的轮廓和背景的过渡区域会显示为亮色，因为这部分区域有较大的亮度变化。而物体内部和背景平滑的区域会显得较暗，因为它们的像素值变化较小。

### 5. **计算方法**

- **深度图**：通常通过深度传感器（如LIDAR、TOF传感器）获取，或者通过立体视觉计算来获得深度信息。

### 总结

- **深度图**关注的是场景中各个点的“深度”信息，显示的是物体到摄像机的距离。





# 梯度图


### 2. **梯度图（Gradient Map）**
梯度图通常表示图像中亮度变化的强度，它揭示了图像在空间上的变化速率。具体来说，梯度图反映了图像中每个点的像素值变化的方向和幅度（即图像的边缘信息）。通常，梯度图由图像在水平方向和垂直方向的梯度组成，它们可以通过以下方式计算：
  
- **梯度计算**：  
  常用的梯度计算方法有 **Sobel 算子**、**Prewitt 算子**、**Scharr 算子** 等。这些算子计算每个像素点在x轴和y轴方向上的变化，并可以得到该像素的梯度值。

- **用途**：
  - **边缘检测**：梯度图能够显示图像中强烈变化的地方，也就是边缘所在的位置。
  - **图像分割**：通过梯度图，可以识别出图像中物体的轮廓。
  - **特征提取**：在计算机视觉中，梯度信息有助于物体识别、运动检测等任务。

- **表现**：
  - 在梯度图中，像素的灰度值表示该点的变化强度。**亮的区域**表示变化较大（即图像中存在边缘或轮廓），**暗的区域**表示变化较小（即平滑区域）。

- **示例**：
  - 如果你将一个高对比度的图像传入梯度计算，图像中的边缘（如物体的轮廓）会变得非常亮，而平滑的区域（如天空或单一颜色的区域）则变暗。


  ### 4. **图像示例对比**

- **梯度图**：在梯度图中，物体的轮廓和背景的过渡区域会显示为亮色，因为这部分区域有较大的亮度变化。而物体内部和背景平滑的区域会显得较暗，因为它们的像素值变化较小。

### 5. **计算方法**
  
- **梯度图**：可以通过对原始图像进行滤波（如使用Sobel算子）来计算每个像素的梯度。

### 总结

- **梯度图**关注的是图像亮度的变化率，主要用来揭示图像的边缘信息和结构特征。





# 直方图

**图片的直方图**（Histogram）是用来描述图像像素分布的一种图形表示方式。它通过统计图像中每个像素的灰度值（或色彩值）的出现频率，生成一个直方图，帮助我们分析图像的亮度、对比度、色彩分布等特征。直方图通常是一个条形图，其中每个条形的高度代表某个灰度值或色彩值在图像中出现的频次。

### 1. **灰度图像直方图**
对于灰度图像（单通道图像），每个像素的灰度值通常是一个从0到255的整数值，表示从黑色到白色的不同亮度。直方图将这些灰度值与其在图像中出现的次数对应，形成一个从0到255范围内的条形图。

- **横轴（X轴）**：灰度值，范围从0（黑色）到255（白色）。
- **纵轴（Y轴）**：每个灰度值出现的频率（像素数量）。

例如，若图像的大部分像素灰度值接近128，则直方图在128处会有一个高峰，表示该灰度值频繁出现。

### 2. **彩色图像直方图**
对于彩色图像，通常使用三种颜色通道来描述：红色、绿色和蓝色（RGB）。每个颜色通道都有一个独立的直方图。

- **红色通道直方图**：表示图像中所有红色成分的亮度分布。
- **绿色通道直方图**：表示图像中所有绿色成分的亮度分布。
- **蓝色通道直方图**：表示图像中所有蓝色成分的亮度分布。

每个通道的直方图独立显示，横轴是0到255的亮度值，纵轴是该亮度值在该颜色通道中出现的次数。

### 3. **直方图的用途**
图像的直方图分析可以提供很多有用的信息：

- **亮度分布**：通过观察直方图，能够看出图像是偏亮、偏暗还是对比度不足。
  - **偏亮**：如果直方图的像素集中在高亮部分（右侧），则图像偏亮。
  - **偏暗**：如果直方图的像素集中在较暗部分（左侧），则图像偏暗。
- **对比度**：图像的对比度可以通过直方图的宽度和分布来判断。广泛分布的直方图通常表示高对比度，而集中于某一部分的直方图表示低对比度。
- **色彩平衡**：通过分析RGB各通道的直方图，可以检查图像的色彩是否均衡。如果某一通道的直方图明显偏高或偏低，可能意味着该颜色的成分过多或过少。

### 4. **直方图均衡化**
直方图均衡化是一种常见的图像处理技术，目的是通过调整图像的灰度分布，使得直方图更加均匀，从而改善图像的对比度。通过均衡化，图像的亮度范围被扩展，暗区和亮区的细节更清晰。

### 总结：
图片的直方图是图像处理中的一个重要工具，可以帮助分析图像的亮度、对比度和色彩分布情况，对于图像增强、图像分析以及后续的处理操作非常有用。




# 单目 双目 多目相机

### 单目

单目摄像头有一个问题是，在测距的范围和距离方面，有一个不可调和的矛盾，即摄像头的视角越宽，**所能探测到精准距离的长度越短，视角越窄，探测到的距离越长**。这类似于人眼看世界，看的越远的时候，所能覆盖的范围就窄，看的近的时候，则覆盖的范围就广一些。

车载摄像头是定焦的，它无法像人眼一样快速变焦。不同的焦距可以满足不同的范围。那么如何用一个定焦镜头解决不同距离的观察，就成为了困惑行业的难题。也因此，业内产生了双目甚至多目的方案，用来解决不同距离下摄像头看清、看准的问题。

缺点: 

  1. 无法直接测量深度：由于只有一个视角，单目相机无法像双目或多目相机那样直接计算深度信息。需要依赖一些算法（如透视几何、物体大小估计、运动分析等）来间接推算距离。
  2. 深度感知不准确：即使通过一些算法（如结构光、深度估计等）推测深度，结果通常不如双目或多目系统精确。


### 双目

两个摄像头从不同的位置拍摄同一个场景，随后通过对两个图像的比对（立体匹配），计算出每个像素点的深度信息。常用的方法是通过视差来估算深度，视差即是同一物体在两个图像中的位置差异。

优点：

    直接获取深度信息：双目系统能够通过计算视差，精确估算场景的三维结构和深度。
    高精度的深度感知：相比单目相机，双目相机提供的深度信息更加准确。
    无需主动光源：与激光雷达等传感器不同，双目相机仅依赖自然光或环境光，因此适应性强，尤其在室外环境下表现良好。

缺点：

    计算复杂：立体匹配算法要求较高的计算性能，尤其是在高分辨率或大范围的情况下。
    视场受限：与人眼不同，双目系统的深度感知精度在某些距离范围内最为准确，若物体距离过近或过远，深度估算误差会增加。
    需要良好的光照条件：低光环境下，深度信息可能受到影响。

### 多目

不同焦距的摄像头，与成像的清晰度是直接挂钩的。车载摄像头一般是固定焦距的，目前车载摄像头每秒处理的图像在20帧左右，每秒处理的数据量巨大。

一方面车载摄像头从技术上是很难达到频繁变焦的，另一方面单个摄像头频繁变焦根本无法应对秒级的巨量数据接收处理。多目摄像头，可以通过不同的摄像头来覆盖不同范围的场景，既解决了摄像头无法来回切换焦距的问题，也可以一次性解决不同距离下识别清晰度的问题。




















